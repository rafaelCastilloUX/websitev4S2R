window.batchAutocomplete=function(i,r,d){var l,u,p,e=i.getAttribute("debounce"),t=i.getAttribute("displaydata"),m=i.getAttribute("notFoundText")||"No results found",g={true:!0,false:!1}[i.getAttribute("showNotFound")]??!0,h=Number(i.getAttribute("take"))||5,n=i.getAttribute("filterType");n&&(p=n.split(",")),e=e||700;const s=["state","address","city","name","zip"],a=e=>e.split(" ").map(e=>e.substr(0,1).toUpperCase()+e.substr(1)).join(" "),v=e=>Boolean(t)&&e[t]&&s.includes(t.toLowerCase())?(e=>{switch(t){case"address":case"city":return a(e);case"state":return e.toUpperCase();default:return e}})(e[t]):e.name,b=()=>{if(g){const e=document.getElementById("batchNoDataFound");e.removeAttribute("class"),e.innerHTML=""}};var o,y,f,A,L=document.getElementById("batch-loader");function E(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),e[l=(l=l>=e.length?0:l)<0?e.length-1:l].classList.add("autocomplete-active"))}function C(e){for(var t=document.getElementsByClassName("autocomplete-items"),n=0;n<t.length;n++)e!=t[n]&&e!=i&&t[n].parentNode.removeChild(t[n])}L.classList.add("d-none"),i.addEventListener("input",(o=async function(e){L.classList.remove("d-none");var t={searchCriteria:{query:i.value},options:{take:h,skip:0,suggestionTypes:p}};i.value.length<3&&0<!u?.length&&b(),3<=i.value.length&&await fetch(r,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer "+d,Accept:"application/json","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{apiResponse=e.result?.suggestions,u=apiResponse,L.classList.add("d-none"),(0===u?.length?()=>{if(g){const e=document.getElementById("batchNoDataFound");e.setAttribute("class","not-found"),e.innerHTML=m,document.querySelector(".batch-loading").appendChild(e)}}:b)(),200!==e?.status?.code&&(e=new CustomEvent("batch-auto-complete-error",{detail:e}),document.dispatchEvent(e))});var n,s,a,o=this.value;if(C(),L.classList.add("d-none"),!o)return!1;if(l=-1,(n=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),n.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(n),u?.length)for(a=0;a<u.length;a++)u[a].name&&(c="",(s=document.createElement("DIV")).setAttribute("class","autocomplete-list"),s.innerHTML="<img style='pointer-events:none' class='map-img' src='https://bst-staging-public.s3.us-west-2.amazonaws.com/map-icon-gray.svg'/>",s.innerHTML+="<strong style='pointer-events:none'>"+u[a].name.substr(0,o.length)+"</strong>",s.innerHTML+=u[a].name.substr(o.length),s.innerHTML+="<input type='hidden' value='"+u[a].name+"'>",s.objAddress=u[a],s.addEventListener("click",function(e){i.value=v(e.target.objAddress);e=new CustomEvent("batch-address-auto-complete",{detail:e.target.objAddress});document.dispatchEvent(e),C()}),n.appendChild(s))},y=e,function(){var e=this,t=arguments,n=f&&!A;clearTimeout(A),A=setTimeout(function(){A=null,f||o.apply(e,t)},y),n&&o.apply(e,t)})),i.addEventListener("keydown",function(e){i.value?.length<3&&0<!u?.length&&b();var t=(t=document.getElementById(this.id+"autocomplete-list"))&&t.getElementsByTagName("div");40==e.keyCode?(l++,E(t)):38==e.keyCode?(l--,E(t)):13==e.keyCode&&(e.preventDefault(),-1<l&&t&&t[l].click())}),document.addEventListener("click",function(e){C(e.target)})};